/*! kirjasto2030 - v0.0.0 - 2015-04-30
* Copyright (c) 2015 ;*/
var app=$.sammy(function(){var a="partials/",b="stories/",c="page-",d={intro:[[!1],["#/teknologia","Teknologia"]],teknologia:[["#/intro","Intro"],["#/laki","Laki"]],"teknologia-tarinat":[["#/teknologia","Teknologia"],["#/laki","Laki"]]},e=function(b,d){console.log("loadContent",b,"function"==typeof d),$("main").addClass("transition").load(a+b+".html",function(){$("main").removeAttr("class").addClass(c+b),"function"==typeof d&&d()})},f=function(a){console.log("loadStory?",a),$("main nav").find("a[href$='"+a+"']").addClass("active"),$("#story").load(b+a+".html",function(){})},g=function(a,b){$(".button-left-bottom").attr("href",a[0]).find("span").html(a[1]),$(".button-right-bottom").attr("href",b[0]).find("span").html(b[1])},h=function(){var a=this.params.page,b=this.params.story;console.log(a,b),d.hasOwnProperty(a)?("undefined"!==b?e(a,function(){console.log("hello callback"),f(b)}):e(a),g(d[a][0],d[a][1])):this.redirect("#/intro")};this.get("#/:page",h),this.get("#/:page/:story",h),this.get("#/liitteet",function(){e("liitteet"),g(["#/teknologia","Teknologia"],["#/laki","Laki"])}),this.get("",function(){this.redirect("#/intro")})});$(function(){app.run()}),$(function(){function a(){c.toggleClass("open")}function b(){c.removeClass("open")}var c=$("#page-navigation"),d=c.find("#pages"),e=$(".button-menu");e.on("click",a),d.on("click","a",b)}),$(function(){$(document).on("scroll",function(){var a=$("body").scrollTop()/($("main").height()-$("body").height());console.log(a),$("#intro").css("margin-left",-100*a+"%"),$("#timeline").css("margin-left",-75*a+"%"),$("#timeline-line").css("margin-left",20*(1-a)+"%"),a>.5?$(".timeline-event").addClass("visible"):$(".timeline-event").removeClass("visible")})});